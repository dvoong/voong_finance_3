<html>
  <head>
    <title></title>
    {% load custom_template_tags %}
    {% load static %}
    <link rel="stylesheet" href="{% static "website/styles.css" %}">
    <script
      src="http://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
      crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js"></script>
  </head>
  <body>
    <div id="menu"></div>
    <div id="balance-chart">
      <svg id="canvas">
	<g id="x-axis"></g>
	<g id="y-axis"></g>
	<g id="plot-area"></g>
      </svg>
    </div>
    <form id="transaction-form" action="/create-transaction" method="post">{% csrf_token %}
      <input id="date-input" type="date" name="date">
      <input id="transaction-size-input" type="number" step="0.01" name="size">
      <input id="description-input" name="description">
      <input id="submit-button" type="submit" value="submit">
    </form>
    <table id="transaction-list">
      <tr class="table-header">
	<th id="date-header">Date</th>
	<th id="transaction-size-header">Transaction Size</th>
	<th id="description-header">Description</th>
	<th id="closing-balance-header">Balance</th>
      </tr>
      {% for t in transactions %}
      <tr class="transaction">
	<form id="transaction-update-form" action="/update-transaction" method="post">{% csrf_token %}
	  <td class="transaction-date"><input type="date" name="date" value="{{t.date|date:'Y-m-d'}}"></td>
	  <td class="transaction-size"><input type="number" step="0.01" name="size" value="{{t.size}}"></td>
	  <td class="transaction-description"><input name="description" value="{{t.description}}"></td>
	  <td class="transaction-closing-balance">{{t.closing_balance|to_currency}}</td>
	  <td><input class="save-transaction-button" type="submit" value="save"></td>
	  <input name="id" type="hidden" value="{{t.id}}">
	</form>
      </tr>
      {% endfor %}
    </table>

    <script>
      transactions = [
      {% for t in transactions %}
      {
      date: "{{t.date|date:'Y-m-d'}}",
      size: {{t.size}},
      description: "{{t.description}}",
      closing_balance: {{t.closing_balance}}
      },
      {% endfor %}
      ]
    </script>

    <script>
      balances = [
      {% for b in balances %}
      {
      date: "{{b.date}}",
      balance: {{b.balance}},
      },
      {% endfor %}
      ]
    </script>

    <script src="{% static "website/home.js" %}" type="text/javascript"></script>

  </body>
</html>
